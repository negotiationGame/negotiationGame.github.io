<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">

    <title>NegotiationGame</title>
  </head>
  <body>


<div class="accordion" id="accordionExample">
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingOne" onclick="negotiate()">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
        <b>5 min timmer</b>
      </button>
    </h2>
    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
      <center>Negotiation closes in <h1><span id="time">05:00</span></h1></center>
    </div>
  </div>
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingTwo" onclick="init_buyer()">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
        <b>Buyer</b>
      </button>
    </h2>
    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
      <div class="accordion-body">
        <form>
          <div class="input-group flex-nowrap">
            <span id="lb-buyer-01" class="input-group-text btn-primary"></span>
            <input id="in-buyer-01" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="buyer-01">
          </div>
          <div class="input-group flex-nowrap">
            <span id="lb-buyer-02" class="input-group-text btn-info"></span>
            <input id="in-buyer-02" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="buyer-02">
          </div>
          <div class="input-group flex-nowrap">
            <span id="lb-buyer-03" class="input-group-text"></span>
            <input id="in-buyer-03" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="buyer-03">
          </div>
          <div class="input-group flex-nowrap">
            <span id="lb-buyer-04" class="input-group-text"></span>
            <input id="in-buyer-04" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="buyer-04">
          </div>
          <div class="input-group flex-nowrap">
            <span id="lb-buyer-05" class="input-group-text"></span>
            <input id="in-buyer-05" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="buyer-05">
          </div>
          <div class="input-group flex-nowrap">
            <span id="lb-buyer-06" class="input-group-text"></span>
            <input id="in-buyer-06" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="buyer-06">
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingThree" onclick="init_seller()">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
        <b>Seller</b>
      </button>
    </h2>
    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
      <div class="accordion-body">
        <form>
          <div class="input-group flex-nowrap">
            <span id="lb-seller-01" class="input-group-text btn-primary"></span>
            <input id="in-seller-01" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="seller-01">
          </div>
          <div class="input-group flex-nowrap">
            <span id="lb-seller-02" class="input-group-text btn-info"></span>
            <input id="in-seller-02" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="seller-02">
          </div>
          <div class="input-group flex-nowrap">
            <span id="lb-seller-03" class="input-group-text"></span>
            <input id="in-seller-03" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="seller-03">
          </div>
          <div class="input-group flex-nowrap">
            <span id="lb-seller-04" class="input-group-text"></span>
            <input id="in-seller-04" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="seller-04">
          </div>
          <div class="input-group flex-nowrap">
            <span id="lb-seller-05" class="input-group-text"></span>
            <input id="in-seller-05" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="seller-05">
          </div>
          <div class="input-group flex-nowrap">
            <span id="lb-seller-06" class="input-group-text"></span>
            <input id="in-seller-06" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="seller-06">
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingFour" onclick="init_summary()">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
        <b>Summary</b>
      </button>
    </h2>
    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
      <div class="accordion-body">
        <form>
          <div class="input-group flex-nowrap">
            <span id="lb-summary-01" class="input-group-text btn-primary"></span>
            <input id="in-summary-01" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="summary-01">
          </div>
          <div class="input-group flex-nowrap">
            <span id="lb-summary-02" class="input-group-text btn-info"></span>
            <input id="in-summary-02" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="summary-02">
          </div>
          <div class="input-group flex-nowrap">
            <span id="lb-summary-03" class="input-group-text"></span>
            <input id="in-summary-03" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="summary-03">
          </div>
          <div class="input-group flex-nowrap">
            <span id="lb-summary-04" class="input-group-text"></span>
            <input id="in-summary-04" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="summary-04">
          </div>
          <div class="input-group flex-nowrap">
            <span id="lb-summary-05" class="input-group-text"></span>
            <input id="in-summary-05" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="summary-05">
          </div>
          <div class="input-group flex-nowrap">
            <span id="lb-summary-06" class="input-group-text"></span>
            <input id="in-summary-06" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="summary-06">
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingFive">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
        <b>Cancel</b>
      </button>
    </h2>
    <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#accordionExample">
      <div class="accordion-body">
        <center>Everything's safe</center>
      </div>
    </div>
  </div>
</div>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js" integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js" integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/" crossorigin="anonymous"></script>
    -->
<script type="text/javascript">
function rX(dim){ return Math.floor((Math.random() * dim) + 1)}
function r10(){ return rX(10); }
function r100(){ return rX(100); }
function r1000(){ return rX(1000); }
function iChoose(items){ return items[Math.floor(Math.random()*items.length)]; }


function getTerm()      { return iChoose('30 Days,90 Days,15 Days,1 week,5 weeks'.split(',')); }
function getFrequency() { return iChoose('One off, Quarterly, Monthly, Yearly'.split(',')); }
function getType()      { return iChoose('Alfa,Bravo,Charlie,Delta,Echo,Foxtrot,Golf,Hotel,India,Juliett,Kilo,Lima,Mike,November,Oscar,Papa,Quebec,Romeo,Sierra,Tango,Uniform,Victor,Whiskey,X-ray,Yankee,Zulu'.split(',')); }
function getTechnique() { return iChoose('Professional Flinch, Nibble, Summarize the Deal often, Pause like Hell!'.split(',')); }

var global_timer;
var global_summary_ctx={};

const ctx = {}
      ctx.val  = r1000()
      ctx.qty  = r1000()
const zero_ctx = {};
      zero_ctx['??????']=''
      zero_ctx['?????']=''
      zero_ctx['????']=''
      zero_ctx['???']=''
      zero_ctx['??']=''
      zero_ctx['?']=''
function update_view(o,str_key){
  var idx=0;
  Object.keys(o).forEach((o_key)=>{
    idx++;
    $('#lb-'+str_key+'-0'+idx).text( o_key );
    $('#in-'+str_key+'-0'+idx).val( o[o_key] );
    console.log(o_key + o[o_key])
  })
}

function init_summary(){
  update_view(global_summary_ctx ,'summary' );
}
function init_seller(){
  var seller_ctx = {};
  seller_ctx['Remember to:'] = getTechnique() ;
  seller_ctx['Break Even']   = ctx.val - Math.floor(ctx.val*Math.random()) ;
  seller_ctx['Quantity']     = ctx.qty - Math.floor(ctx.qty*Math.random()) ;
  seller_ctx['Type']         = getType() ;
  seller_ctx['Invoice Term'] = getTerm() ;
  seller_ctx['Frequency']    = getFrequency() ;

  global_summary_ctx['Seller Practice'] = seller_ctx['Practice']
  global_summary_ctx['Seller Break Even'] = seller_ctx['Break Even']
  global_summary_ctx['-'] = '-'

  /* ************************************************************** */

  update_view(seller_ctx,'seller');
  setTimeout( ()=>{update_view(zero_ctx,'seller')}, 10*1000);
}
function init_buyer(){
  var buyer_ctx = {};
  buyer_ctx['Remember to:'] = getTechnique() ;
  buyer_ctx['Budget']       = ctx.val + Math.floor(ctx.val*Math.random()) ;
  buyer_ctx['Quantity']     = ctx.qty + Math.floor(ctx.qty*Math.random()) ;
  buyer_ctx['Type']         = getType() ;
  buyer_ctx['Invoice Term'] = getTerm() ;
  buyer_ctx['Frequency']    = getFrequency() ;

  global_summary_ctx['Buyer Budget'] = buyer_ctx['Budget']
  global_summary_ctx['Buyer Practice'] = buyer_ctx['Practice']
  global_summary_ctx['-'] = '-'

  /* ************************************************************** */

  update_view(buyer_ctx ,'buyer' );
  setTimeout( ()=>{update_view(zero_ctx,'buyer')}, 10*1000);
}

function startTimer(duration, display) {
  clearInterval(global_timer);
  var start = Date.now(),
      diff,
      minutes,
      seconds;
  function timer() {
      // get the number of seconds that have elapsed since 
      // startTimer() was called
      diff = duration - (((Date.now() - start) / 1000) | 0);

      // does the same job as parseInt truncates the float
      minutes = (diff / 60) | 0;
      seconds = (diff % 60) | 0;

      minutes = minutes < 10 ? "0" + minutes : minutes;
      seconds = seconds < 10 ? "0" + seconds : seconds;

      display.textContent = minutes + ":" + seconds; 

      if (diff <= 0) {
          // add one second so that the count down starts at the full duration
          // example 05:00 not 04:59
          start = Date.now() + 1000;
      }
  };
  // we don't want to wait a full second before the timer starts
  timer();
  return setInterval(timer, 1000);
}

function negotiate() {
    var fiveMinutes = 60 * 5,
        display = document.querySelector('#time');
    global_timer = startTimer(fiveMinutes, display);
};

</script>
  </body>
</html>